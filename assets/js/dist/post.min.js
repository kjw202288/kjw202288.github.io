/*!
 * Chirpy v5.6.0 (https://github.com/cotes2020/jekyll-theme-chirpy/)
 * Â© 2019 Cotes Chung
 * MIT Licensed
 */
!function(){"use strict";const t=$(".mode-toggle");function e(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function o(t,o,a){return(o=e(o))in t?Object.defineProperty(t,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[o]=a,t}const a=$("body"),r="sidebar-display";class n{static toggle(){!1===n.isExpanded?a.attr(r,""):a.removeAttr(r),n.isExpanded=!n.isExpanded}}o(n,"isExpanded",!1);const s="div.post>h1:first-of-type",i=$(s),c=$("#topbar-title"),l=c.text().trim();const p=$("#sidebar-trigger"),d=$("#search-trigger"),u=$("#search-cancel"),f=$("#main"),g=$("#topbar-title"),h=$("#search-wrapper"),m=$("#search-result-wrapper"),b=$("#search-results"),w=$("#search-input"),v=$("#search-hints"),y=$("html,body"),C="loaded",k="unloaded",T="input-focus",S="d-flex";class x{static on(){x.offset=window.scrollY,y.scrollTop(0)}static off(){y.scrollTop(x.offset)}}o(x,"offset",0),o(x,"resultVisible",!1);class E{static on(){p.addClass(k),g.addClass(k),d.addClass(k),h.addClass(S),u.addClass(C)}static off(){u.removeClass(C),h.removeClass(S),p.removeClass(k),g.removeClass(k),d.removeClass(k)}}class I{static on(){x.resultVisible||(x.on(),m.removeClass(k),f.addClass(k),x.resultVisible=!0)}static off(){x.resultVisible&&(b.empty(),v.hasClass(k)&&v.removeClass(k),m.addClass(k),f.removeClass(k),x.off(),w.val(""),x.resultVisible=!1)}}function L(){return u.hasClass(C)}const _="data-topbar-visible",P=$("body"),O=$("#topbar-wrapper");class K{static hideTopbar(){P.attr(_,"false")}static showTopbar(){P.attr(_,"true")}static addScrollUpTask(){K.scrollUpCount+=1,K.topbarIsLocked||(K.topbarIsLocked=!0)}static popScrollUpTask(){K.scrollUpCount-=1}static hasScrollUpTask(){return K.scrollUpCount>0}static topbarLocked(){return!0===K.topbarIsLocked}static unlockTopbar(){K.topbarIsLocked=!1}static getTopbarHeight(){return O.outerHeight()}static orientationLocked(){return!0===K.orientationIsLocked}static lockOrientation(){K.orientationIsLocked=!0}static unLockOrientation(){K.orientationIsLocked=!1}}o(K,"scrollUpCount",0),o(K,"topbarIsLocked",!1),o(K,"orientationIsLocked",!1);const R=$("#search-input"),V=K.getTopbarHeight();let Y,F=0;function N(){0!==$(window).scrollTop()&&(K.lockOrientation(),K.hideTopbar())}function U(){const t=screen.orientation;t?t.onchange=()=>{const e=t.type;"landscape-primary"!==e&&"landscape-secondary"!==e||N()}:$(window).on("orientationchange",(()=>{$(window).width()<$(window).height()&&N()})),$(window).on("scroll",(()=>{Y||(Y=!0)})),setInterval((()=>{Y&&(!function(){let t=$(window).scrollTop();if(!(Math.abs(F-t)<=V)){if(t>F)K.hideTopbar(),R.is(":focus")&&R.trigger("blur");else if(t+$(window).height()<$(document).height()){if(K.hasScrollUpTask())return;K.topbarLocked()?K.unlockTopbar():K.orientationLocked()?K.unLockOrientation():K.showTopbar()}F=t}}(),Y=!1)}),250)}$(".collapse");const j=".code-header>button",A="fas fa-check",M="timeout",D="data-title-succeed",H="data-original-title",J=2e3;function z(t){if($(t)[0].hasAttribute(M)){let e=$(t).attr(M);if(Number(e)>Date.now())return!0}return!1}function q(t){$(t).attr(M,Date.now()+J)}function B(t){$(t).removeAttr(M)}const G=$(j).children().attr("class");class Q{static get attrTimestamp(){return"data-ts"}static get attrDateFormat(){return"data-df"}static get locale(){return $("html").attr("lang").substring(0,2)}static getTimestamp(t){return Number(t.attr(Q.attrTimestamp))}static getDateFormat(t){return t.attr(Q.attrDateFormat)}}const W=function(){let t=!1;return()=>{let e=t;return t||(t=!0),e}}(),X=function(){function t(t){return $(t).attr("content")}function e(e){let o=t(e);return void 0!==o&&!1!==o}return{getProxyMeta:()=>t("meta[name=pv-proxy-endpoint]"),getLocalMeta:()=>t("meta[name=pv-cache-path]"),hasProxyMeta:()=>e("meta[name=pv-proxy-endpoint]"),hasLocalMeta:()=>e("meta[name=pv-cache-path]")}}(),Z=function(){const t={KEY_PV:"pv",KEY_PV_SRC:"pv_src",KEY_CREATION:"pv_created_date"},e="same-origin",o="cors";function a(t){return localStorage.getItem(t)}function r(t,e){localStorage.setItem(t,e)}function n(e,o){r(t.KEY_PV,e),r(t.KEY_PV_SRC,o),r(t.KEY_CREATION,(new Date).toJSON())}return{keysCount:()=>Object.keys(t).length,hasCache:()=>null!==localStorage.getItem(t.KEY_PV),getCache:()=>JSON.parse(localStorage.getItem(t.KEY_PV)),saveLocalCache(t){n(t,e)},saveProxyCache(t){n(t,o)},isExpired(){let e=new Date(a(t.KEY_CREATION));return e.setHours(e.getHours()+1),Date.now()>=e.getTime()},isFromLocal:()=>a(t.KEY_PV_SRC)===e,isFromProxy:()=>a(t.KEY_PV_SRC)===o,newerThan:t=>Z.getCache().totalsForAllResults["ga:pageviews"]>t.totalsForAllResults["ga:pageviews"],inspectKeys(){if(localStorage.length===Z.keysCount())for(let e=0;e<localStorage.length;e++){switch(localStorage.key(e)){case t.KEY_PV:case t.KEY_PV_SRC:case t.KEY_CREATION:break;default:return void localStorage.clear()}}else localStorage.clear()}}}();function tt(t,e,o,a){let r=function(t,e){let o=0;if(void 0!==e)for(let a=0;a<e.length;++a)if(e[parseInt(a,10)][0]===t){o+=parseInt(e[parseInt(a,10)][1],10);break}return o}(e,t);if(r=0===r?1:r,a){const t=parseInt(o.text().replace(/,/g,""),10);r>t&&function(t,e,o){if(t<e){let a=new CountUp(o,t,e);a.error?console.error(a.error):a.start()}}(t,r,o.attr("id"))}else o.text((new Intl.NumberFormat).format(r))}function et(t){if(void 0===t)return;let e=W();const o=t.rows;if($("#post-list").length>0)$(".post-preview").each((function(){const t=$(this).find("a").attr("href");tt(o,t,$(this).find(".pageviews"),e)}));else if($(".post").length>0){const t=window.location.pathname;tt(o,t,$("#pv"),e)}}function ot(){X.hasProxyMeta()&&$.ajax({type:"GET",url:X.getProxyMeta(),dataType:"jsonp",jsonpCallback:"displayPageviews",success:t=>{Z.saveProxyCache(JSON.stringify(t))},error:(t,e,o)=>{console.log("Failed to load pageviews from proxy server: "+o)}})}function at(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return fetch(X.getLocalMeta()).then((t=>t.json())).then((e=>{t&&Z.isFromProxy()&&Z.newerThan(e)||(et(e),Z.saveLocalCache(JSON.stringify(e)))}))}$(window).on("scroll",(()=>{$(window).scrollTop()>50&&"none"===$("#sidebar-trigger").css("display")?$("#back-to-top").fadeIn():$("#back-to-top").fadeOut()})),$("#back-to-top").on("click",(()=>($("body,html").animate({scrollTop:0},800),!1))),$('[data-toggle="tooltip"]').tooltip(),0!==t.length&&t.off().on("click",(t=>{const e=$(t.target);let o=e.prop("tagName")==="button".toUpperCase()?e:e.parent();modeToggle.flipMode(),o.trigger("blur")})),$("#sidebar-trigger").on("click",n.toggle),$("#mask").on("click",n.toggle),function(){if(0===i.length||i.hasClass("dynamic-title")||c.is(":hidden"))return;let t=i.text().trim(),e=!1,o=0;($("#page-category").length||$("#page-tag").length)&&/\s/.test(t)&&(t=t.replace(/[0-9]/g,"").trim()),i.offset().top<$(window).scrollTop()&&c.text(t),new IntersectionObserver((a=>{if(!e)return void(e=!0);let r=$(window).scrollTop(),n=o<r;o=r;let s=a[0];n?0===s.intersectionRatio&&c.text(t):1===s.intersectionRatio&&c.text(l)}),{rootMargin:"-48px 0px 0px 0px",threshold:[0,1]}).observe(document.querySelector(s)),c.on("click",(function(){$("body,html").animate({scrollTop:0},800)}))}(),d.on("click",(function(){E.on(),I.on(),w.trigger("focus")})),u.on("click",(function(){E.off(),I.off()})),w.on("focus",(function(){h.addClass(T)})),w.on("focusout",(function(){h.removeClass(T)})),w.on("input",(()=>{""===w.val()?L()?v.removeClass(k):I.off():(I.on(),L()&&v.addClass(k))})),U(),$("#core-wrapper img[data-src]")<=0||($(".popup").magnificPopup({type:"image",closeOnContentClick:!0,showCloseBtn:!1,zoom:{enabled:!0,duration:300,easing:"ease-in-out"}}),document.addEventListener("lazyloaded",(function(t){$(t.target).parent().removeClass("shimmer")}))),dayjs.locale(Q.locale),dayjs.extend(window.dayjs_plugin_localizedFormat),$("[".concat(Q.attrTimestamp,"]")).each((function(){const t=dayjs.unix(Q.getTimestamp($(this))),e=t.format(Q.getDateFormat($(this)));$(this).text(e),$(this).removeAttr(Q.attrTimestamp),$(this).removeAttr(Q.attrDateFormat);const o=$(this).attr("data-toggle");if(void 0===o||"tooltip"!==o)return;const a=t.format("llll");$(this).attr("data-original-title",a)})),function(){const t=new ClipboardJS(j,{target:t=>t.parentNode.nextElementSibling.querySelector("code .rouge-code")});$(j).tooltip({trigger:"hover",placement:"left"}),t.on("success",(t=>{t.clearSelection();const e=t.trigger;z(e)||(!function(t){$(t).children().attr("class",A)}(e),function(t){const e=$(t).attr(D);$(t).attr(H,e).tooltip("show")}(e),q(e),setTimeout((()=>{!function(t){$(t).tooltip("hide").removeAttr(H)}(e),function(t){$(t).children().attr("class",G)}(e),B(e)}),J))})),$("#copy-link").on("click",(t=>{let e=$(t.target);z(e)||navigator.clipboard.writeText(window.location.href).then((()=>{const t=e.attr(H),o=e.attr(D);e.attr(H,o).tooltip("show"),q(e),setTimeout((()=>{e.attr(H,t),B(e)}),J)}))}))}(),tocbot.init({tocSelector:"#toc",contentSelector:".post-content",ignoreSelector:"[data-toc-skip]",headingSelector:"h2, h3",orderedList:!1,scrollSmooth:!1}),function(){const t=$("#topbar-title"),e="scroll-focus";$("a[href*='#']:not([href='#']):not([href='#0'])").on("click",(function(o){if(this.pathname.replace(/^\//,"")!==location.pathname.replace(/^\//,""))return;if(location.hostname!==this.hostname)return;const a=decodeURI(this.hash);let r=RegExp(/^#fnref:/).test(a),n=!r&&RegExp(/^#fn:/).test(a),s="#"+$.escapeSelector(a.substring(1)),i=$(s),c=t.is(":visible"),l=$(window).width()<$(window).height();if(void 0===i)return;o.preventDefault(),history.pushState&&history.pushState(null,null,a);let p=$(window).scrollTop(),d=i.offset().top-=8;d<p?(K.hideTopbar(),K.addScrollUpTask(),c&&l&&(d-=K.getTopbarHeight())):c&&l&&(d-=K.getTopbarHeight()),$("html").animate({scrollTop:d},500,(()=>{i.trigger("focus");const t=$("[".concat(e,"=true]"));t.length&&t.attr(e,"false");const o=$(":target");if(o.length&&o.attr(e,"false"),(n||r)&&i.attr(e,"true"),i.is(":focus"))return!1;i.attr("tabindex","-1"),i.trigger("focus"),K.hasScrollUpTask()&&K.popScrollUpTask()}))}))}(),$(".pageviews").length<=0||(Z.inspectKeys(),Z.hasCache()?(et(Z.getCache()),Z.isExpired()?X.hasLocalMeta()?at(!0).then(ot):ot():Z.isFromLocal()&&ot()):X.hasLocalMeta()?at().then(ot):ot())}();
